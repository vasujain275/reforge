# ============================================================================
# REFORGE DOCKER COMPOSE ENVIRONMENT CONFIGURATION
# ============================================================================
# This file contains environment variables for Docker Compose deployment.
# Copy this file to .env and customize the values before running docker compose.
#
# Quick Start:
#   cp .env.sample .env
#   vim .env  # Edit JWT_SECRET and DB_PASSWORD
#   docker compose up -d
#
# Services:
#   - Frontend: http://localhost:5173
#   - Backend API: http://localhost:9173
#   - PostgreSQL: localhost:5432
# ============================================================================

# ============================================================================
# REQUIRED SECRETS - MUST BE CHANGED BEFORE DEPLOYMENT
# ============================================================================

# JWT Secret for authentication tokens
# SECURITY: Generate a strong random secret for production!
# Generate: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-me

# Database password for PostgreSQL (used when running local postgres)
# SECURITY: Generate a strong random password for production!
# Generate: openssl rand -base64 32
DB_PASSWORD=your-strong-database-password-change-me

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Full PostgreSQL connection string (libpq format)
# 
# For local Docker Compose with postgres service:
#   Leave commented out - uses default: postgresql://reforge:${DB_PASSWORD}@postgres:5432/reforge?sslmode=disable
#
# For external PostgreSQL (e.g., Neon, AWS RDS):
#   Uncomment and provide full connection string
#   DATABASE_URL=postgresql://username:password@host:5432/reforge?sslmode=require
#
# For Neon PostgreSQL example:
#   DATABASE_URL=postgresql://username:password@ep-xxx-xxx.region.aws.neon.tech/reforge?sslmode=require
#
# DATABASE_URL=

# PostgreSQL port exposed on host machine (only for local postgres service)
# Default: 5432
# Change if you have another PostgreSQL instance running on the same port
POSTGRES_PORT=5432

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Server bind address and port
# Default: 0.0.0.0:9173 (accessible from host machine)
ADDR=0.0.0.0:9173

# Environment mode: 'dev' or 'prod'
# - prod: Production optimizations, stricter security (recommended for Docker)
# - dev: Detailed logging, development features
ENV=prod

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================

# Backend URL for Vite dev server proxy
# For Docker Compose: Use internal hostname 'reforge-api'
# For local development: Use 'http://localhost:9173'
#
# Docker internal (default):
#   VITE_BACKEND_URL=http://reforge-api:9173
#
# Local development:
#   VITE_BACKEND_URL=http://localhost:9173
#
# Custom backend:
#   VITE_BACKEND_URL=https://api.example.com
VITE_BACKEND_URL=http://reforge-api:9173

# ============================================================================
# SCORING ALGORITHM WEIGHTS (OPTIONAL)
# ============================================================================

# Reforge uses a deterministic 7-feature weighted scoring formula.
# These values should sum to 1.0 for optimal scoring.
# Admins can customize these at runtime via the UI.
#
# Defaults (if not set):
DEFAULT_W_CONF=0.30
DEFAULT_W_DAYS=0.20
DEFAULT_W_ATTEMPTS=0.10
DEFAULT_W_TIME=0.05
DEFAULT_W_DIFFICULTY=0.15
DEFAULT_W_FAILED=0.10
DEFAULT_W_PATTERN=0.10

# ============================================================================
# SIGNUP SETTINGS (OPTIONAL)
# ============================================================================

# Allow new user registrations (true/false)
DEFAULT_SIGNUP_ENABLED=true

# Allow admin-generated invite codes when signup is disabled (true/false)
DEFAULT_INVITE_CODES_ENABLED=true

# ============================================================================
# DATA IMPORT (OPTIONAL)
# ============================================================================

# Path to bundled CSV datasets for bulk problem import
# Default: ./sample-datasets (contains leetcode.csv with 2000+ problems)
# DATASET_PATH=/app/sample-datasets
